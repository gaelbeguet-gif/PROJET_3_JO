================================================================================
DOCUMENTATION TECHNIQUE DÉTAILLÉE : ORACLE OLYMPIQUE LA28 (v3.0)
Fichier principal : jo_final.py
Date : 11/02/2026
================================================================================

1. ARCHITECTURE ET FICHIERS DU PROJET
-------------------------------------

1.1 ARBORESCENCE DE FICHIERS (FILE TREE)
    Voici la structure exacte du dossier racine 'PROJET_3' :

    PROJET_3/
    ├── jo_final.py                 # [MAIN] Le script de l'application Streamlit
    ├── requirements.txt            # [CONFIG] Liste des librairies (pip install -r requirements.txt)
    ├── docu_technique.txt          # [DOC] Ce fichier de documentation
    ├── guide_installation.txt      # [DOC] Guide pour l'utilisateur final
    │
    ├── athlete_events_ml_ready.csv # [DATA] Historique pour le Machine Learning (Source Kaggle nettoyée)
    ├── la28_venues_geocoded.csv    # [DATA] Coordonnées GPS pour la Carte Interactive
    │
    └── assets/                     # [MEDIA] Dossier images
        ├── LA28GamesPlanMainPage.webp   # Image d'accueil
        ├── sofi.jpg, coliseum.jpg...    # Photos des sites (27+ fichiers)
        └── default.png                  # Image de secours

1.2 DÉPENDANCES CLÉS (LIBRARIES)
    - Core : streamlit, pandas, numpy, os, random, time.
    - ML : scikit-learn (RandomForestRegressor, MultiOutputRegressor).
    - Visuel : pydeck (Cartes 3D), PIL (ImageOps, Traitement d'images).
    - UI : streamlit-option-menu (Navigation), streamlit-lottie (Animations).
    - IA : google-generativeai (Chatbot Gemini Flash Latest).

================================================================================

2. LOGIQUE MÉTIER & BACKEND (jo_final.py)
-----------------------------------------

[A] CONFIGURATION & STYLE
    - Thème : "Dark Mode" forcé (#1A1A1A background, #FA009C accent).
    - Injection CSS pour surcharger les composants natifs (Sidebar, Chatbot, Metrics).
    - Gestion sécurisée de la clé API via st.secrets.

[B] COMPOSANT : BANDEAU PHOTO DYNAMIQUE (afficher_banniere_photos)
    - Déclenchement : Sur toutes les pages SAUF "Carte Interactive".
    - Logique : Scanne /assets, filtre les extensions (.jpg, .webp, .png), exclut les fichiers système, et affiche 5 images aléatoires recadrées (600x400px).

[C] MACHINE LEARNING (load_and_train_model)
    - Modèle : Random Forest (entraîné à la volée avec @st.cache_resource).
    - Features : Pays, Année, Hôte, Athlètes, Sports, Moyennes physiques (Age/Taille/Poids).
    - Output : Prédiction multi-cibles (Or, Argent, Bronze).

[D] IA GENERATIVE (obtenir_reponse_ia)
    - Modèle : Gemini Flash Latest via SDK Google.
    - Robustesse : Système de retry (3 tentatives) avec backoff exponentiel pour gérer les erreurs de quota (429) ou de service (503).

================================================================================

3. DÉTAIL DES VUES (PAGES)
--------------------------

[1] PAGE ACCUEIL (page_home)
    - Hero Image : Chargement sécurisé de 'LA28GamesPlanMainPage.webp'.
    - Présentation : Grid layout 4 colonnes décrivant les modules.

[2] PAGE PRÉDICTIONS (page_prediction)
    - Interface : Sélecteurs Pays / Sport dynamiques basés sur le dataset ML.
    - Sortie : KPI Médailles prédites + Tableau détaillé par épreuve trié par chance de médaille d'or.

[3] PAGE CARTE INTERACTIVE (page_map)
    - Moteur : PyDeck ScatterplotLayer.
    - Données : la28_venues_geocoded.csv.
    - Interaction : 
      * Clic sur le tableau -> Zoom automatique (ViewState) + Affichage photo.
      * Gestionnaire d'images (VENUE_FILES) mappant les noms de sites aux fichiers assets correspondants.

[4] PAGE ATHLÈTES (page_athletes)
    - Annuaire : Filtrage dynamique par Pays et Discipline.
    - IA Contextuelle : Sélectionner une ligne du tableau génère une biographie via Gemini ("Rédige une bio courte...").

[5] PAGE CHATBOT (page_chatbot)
    - Moteur : Google Gemini Flash Latest.
    - UI : Historique de chat persistant, animation Lottie d'attente, bouton "Effacer l'historique".

================================================================================
FIN DU DOCUMENT